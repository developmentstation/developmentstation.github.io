<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Date Calculator - DevTools Hub</title>
  <meta name="description" content="Calculate date differences and add/subtract days. Shows results in years, months, days and total days, hours, minutes, seconds.">
  <meta name="keywords" content="date calculator, date difference, add days, subtract days, date math">
  <meta name="author" content="DevTools Hub">
  <meta name="robots" content="index, follow">

  <meta name="theme-color" content="#3b82f6">
  <meta name="color-scheme" content="light dark">

  <link rel="stylesheet" href="../assets/css/modern-styles.css">
</head>
<body data-theme="light">
  <header class="header">
    <div class="container">
      <div class="header-content">
        <div class="logo">
          <button class="btn btn-ghost" onclick="goBack()" aria-label="Go back">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
          </button>
          <a href="../index.html" class="logo">
            <span class="logo-icon">üõ†Ô∏è</span>
            <span>DevTools Hub</span>
          </a>
        </div>

        <nav class="nav-links">
          <a href="../index.html" class="nav-link">Home</a>
          <a href="#" class="nav-link active" onclick="filterTools('time')">Time & Date</a>
          <a href="unix-timestamp-converter.html" class="nav-link">Timestamp</a>
          <a href="world-clock.html" class="nav-link">World Clock</a>
        </nav>

        <div class="header-actions">
          <div class="search-container">
            <input type="text" id="searchInput" placeholder="Search tools..." class="search-input">
            <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"/>
              <path d="m21 21-4.35-4.35"/>
            </svg>
          </div>

          <button id="themeToggle" class="theme-toggle" aria-label="Toggle theme">
            <span id="themeIcon">üåô</span>
          </button>
        </div>
      </div>
    </div>
  </header>

  <div class="breadcrumb">
    <div class="container">
      <nav class="breadcrumb-nav" aria-label="Breadcrumb"></nav>
    </div>
  </div>

  <main class="main">
    <div class="container">
      <div class="tool-layout">
        <div class="tool-content">
          <div class="tool-header">
            <div class="tool-icon">
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="4" width="18" height="18" rx="2"/>
                <line x1="16" y1="2" x2="16" y2="6"/>
                <line x1="8" y1="2" x2="8" y2="6"/>
                <line x1="3" y1="10" x2="21" y2="10"/>
              </svg>
            </div>
            <div class="tool-info">
              <h1>Date Calculator</h1>
              <p class="tool-description">Find the difference between two dates and add/subtract days from a date.</p>
            </div>
          </div>

          <!-- Date Difference -->
          <div class="card mb-6">
            <div class="card-header">
              <div class="card-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12 20h9"/>
                  <path d="M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
                </svg>
              </div>
              <div>
                <h3 class="card-title">Date Difference</h3>
                <p class="card-description">Calculate the distance between two dates</p>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="fromDate" class="form-label">From</label>
                <input id="fromDate" type="date" class="form-input" onchange="calculateDateDifference()">
                <div class="btn-group" style="margin-top:.5rem">
                  <button class="btn btn-outline btn-sm" onclick="setToday('fromDate')">Today</button>
                </div>
              </div>
              <div class="form-group">
                <label for="toDate" class="form-label">To</label>
                <input id="toDate" type="date" class="form-input" onchange="calculateDateDifference()">
                <div class="btn-group" style="margin-top:.5rem">
                  <button class="btn btn-outline btn-sm" onclick="setToday('toDate')">Today</button>
                </div>
              </div>
            </div>

            <div class="btn-group">
              <button class="btn btn-primary" onclick="calculateDateDifference()">Calculate</button>
              <button class="btn btn-ghost" onclick="clearDiff()">Clear</button>
            </div>

            <div class="grid" style="grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 1rem; margin-top: 1rem;" id="diffResults">
            </div>
          </div>

          <!-- Add / Subtract Days -->
          <div class="card">
            <div class="card-header">
              <div class="card-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                  <line x1="12" y1="8" x2="12" y2="16"/>
                  <line x1="8" y1="12" x2="16" y2="12"/>
                </svg>
              </div>
              <div>
                <h3 class="card-title">Add / Subtract Days</h3>
                <p class="card-description">Modify a date by a number of days</p>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="baseDate" class="form-label">Base date</label>
                <input id="baseDate" type="date" class="form-input">
                <div class="btn-group" style="margin-top:.5rem">
                  <button class="btn btn-outline btn-sm" onclick="setToday('baseDate')">Today</button>
                </div>
              </div>
              <div class="form-group">
                <label for="numDays" class="form-label">Days</label>
                <input id="numDays" type="number" class="form-input" value="1">
              </div>
            </div>

            <div class="btn-group">
              <button class="btn btn-primary" onclick="applyDays(1)">Add</button>
              <button class="btn btn-secondary" onclick="applyDays(-1)">Subtract</button>
              <button class="btn btn-ghost" onclick="clearAdjust()">Clear</button>
            </div>

            <div class="result-area" id="adjustResult" style="display:none; margin-top:1rem;">
              <div class="result-content" id="adjustText"></div>
              <button class="copy-btn" data-target="adjustText">Copy</button>
            </div>
          </div>
        </div>

        <div class="tool-sidebar">
          <div class="card">
            <div class="card-header">
              <div class="card-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                </svg>
              </div>
              <div>
                <h3 class="card-title">Notes</h3>
              </div>
            </div>
            <ul class="text-xs text-secondary" style="list-style: disc; padding-left: 18px;">
              <li>Differences are calculated in calendar terms (Y/M/D) and total elapsed units.</li>
              <li>All calculations use your local timezone.</li>
              <li>Adding days respects daylight saving transitions.</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h4>DevTools Hub</h4>
          <p>Professional developer tools that work offline. Privacy-focused and completely free.</p>
        </div>
        <div class="footer-section">
          <h4>Time & Date</h4>
          <a href="date-calculator.html">Date Calculator</a>
          <a href="world-clock.html">World Clock</a>
          <a href="unix-timestamp-converter.html">Unix Timestamp</a>
        </div>
        <div class="footer-section">
          <h4>Popular</h4>
          <a href="../tools/json-formatter.html">JSON Formatter</a>
          <a href="../tools/qr-generator.html">QR Generator</a>
          <a href="../tools/password-generator.html">Password Generator</a>
        </div>
        <div class="footer-section">
          <h4>Features</h4>
          <span>‚úì Works Offline</span>
          <span>‚úì No Data Collection</span>
          <span>‚úì Mobile Friendly</span>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2024 DevTools Hub. Built with ‚ù§Ô∏è for developers.</p>
      </div>
    </div>
  </footer>

  <script src="../assets/js/modern-shared.js"></script>
  <script>
    function setToday(id){
      const el = document.getElementById(id);
      const today = new Date();
      el.value = toDateInput(today);
    }

    function toDateInput(d){
      const y = d.getFullYear();
      const m = String(d.getMonth()+1).padStart(2,'0');
      const day = String(d.getDate()).padStart(2,'0');
      return `${y}-${m}-${day}`;
    }

    function parseLocalDate(id){
      const v = document.getElementById(id).value;
      if (!v) return null;
      // Create local date at midnight
      return new Date(v + 'T00:00:00');
    }

    function calculateDateDifference(){
      const from = parseLocalDate('fromDate');
      const to = parseLocalDate('toDate');
      const out = document.getElementById('diffResults');
      out.innerHTML = '';
      if (!from || !to){
        return;
      }

      const a = new Date(from.getTime());
      const b = new Date(to.getTime());
      const swap = a > b; // ensure a <= b for calendar diff
      const start = swap ? b : a;
      const end = swap ? a : b;

      // Calendar diff (years, months, days)
      const cal = calendarDiff(start, end);

      // Absolute differences
      const ms = Math.abs(b - a);
      const sec = Math.floor(ms/1000);
      const min = Math.floor(sec/60);
      const hrs = Math.floor(min/60);
      const days = Math.floor(hrs/24);
      const weeks = Math.floor(days/7);

      const cards = [
        { title: 'Calendar Difference', body: `${cal.y} year(s), ${cal.m} month(s), ${cal.d} day(s)` },
        { title: 'Total Days', body: `${days} day(s)` },
        { title: 'Total Weeks', body: `${weeks} week(s)` },
        { title: 'Total Hours', body: `${hrs} hour(s)` },
        { title: 'Total Minutes', body: `${min} minute(s)` },
        { title: 'Total Seconds', body: `${sec} second(s)` }
      ];

      const frag = document.createDocumentFragment();
      cards.forEach(c => {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <div class="card-header" style="margin-bottom:0">
            <div class="card-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/></svg></div>
            <div><h4 class="card-title">${c.title}</h4></div>
          </div>
          <div class="p-4">${c.body}</div>
        `;
        frag.appendChild(card);
      });
      out.appendChild(frag);
    }

    function calendarDiff(start, end){
      let y = end.getFullYear() - start.getFullYear();
      let m = end.getMonth() - start.getMonth();
      let d = end.getDate() - start.getDate();

      if (d < 0){
        // borrow from previous month
        const prevMonth = new Date(end.getFullYear(), end.getMonth(), 0).getDate();
        d += prevMonth;
        m -= 1;
      }
      if (m < 0){
        m += 12;
        y -= 1;
      }
      return { y, m, d };
    }

    function applyDays(direction){
      const base = parseLocalDate('baseDate');
      const n = parseInt(document.getElementById('numDays').value, 10);
      const res = document.getElementById('adjustResult');
      const txt = document.getElementById('adjustText');
      if (!base || isNaN(n)){
        if (window.ToastManager) window.ToastManager.info('Enter base date and days');
        return;
      }
      const days = direction * Math.abs(n);
      const result = new Date(base);
      result.setDate(result.getDate() + days);
      txt.textContent = `${days >= 0 ? 'Result (added)' : 'Result (subtracted)'}: ${formatLong(result)}`;
      res.style.display = 'block';
    }

    function formatLong(d){
      return `${d.toLocaleDateString()} ${d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}`;
    }

    function clearDiff(){
      document.getElementById('fromDate').value = '';
      document.getElementById('toDate').value = '';
      document.getElementById('diffResults').innerHTML = '';
    }

    function clearAdjust(){
      document.getElementById('baseDate').value = '';
      document.getElementById('numDays').value = '1';
      document.getElementById('adjustResult').style.display = 'none';
      document.getElementById('adjustText').textContent = '';
    }

    document.addEventListener('DOMContentLoaded', () => {
      // Default values
      const today = new Date();
      document.getElementById('fromDate').value = toDateInput(today);
      const tomorrow = new Date(today.getTime());
      tomorrow.setDate(tomorrow.getDate() + 1);
      document.getElementById('toDate').value = toDateInput(tomorrow);
      document.getElementById('baseDate').value = toDateInput(today);
      calculateDateDifference();
    });
  </script>
</body>
</html>


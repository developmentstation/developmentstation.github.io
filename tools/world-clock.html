<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>World Clock - DevTools Hub</title>
    <meta name="description" content="Add multiple cities and track their local time. 12/24‚Äëhour toggle with live updates and local storage.">
    <meta name="keywords" content="world clock, multiple timezones, timezone converter, local time">
    <meta name="author" content="DevTools Hub">
    <meta name="robots" content="index, follow">

    <meta name="theme-color" content="#3b82f6">
    <meta name="color-scheme" content="light dark">

    <link rel="stylesheet" href="../assets/css/modern-styles.css">
</head>
<body data-theme="light">
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <button class="btn btn-ghost" onclick="goBack()" aria-label="Go back">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    <a href="../index.html" class="logo">
                        <span class="logo-icon">üõ†Ô∏è</span>
                        <span>DevTools Hub</span>
                    </a>
                </div>
                <nav class="nav-links">
                    <a href="../index.html" class="nav-link">Home</a>
                    <a href="#" class="nav-link active" onclick="filterTools('time')">Time & Date</a>
                    <a href="unix-timestamp-converter.html" class="nav-link">Timestamp</a>
                    <a href="date-calculator.html" class="nav-link">Date Calc</a>
                </nav>
                <div class="header-actions">
                    <div class="search-container">
                        <input type="text" id="searchInput" placeholder="Search tools..." class="search-input">
                        <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"/>
                            <path d="m21 21-4.35-4.35"/>
                        </svg>
                    </div>
                    <button id="themeToggle" class="theme-toggle" aria-label="Toggle theme">
                        <span id="themeIcon">üåô</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div class="breadcrumb">
        <div class="container">
            <nav class="breadcrumb-nav" aria-label="Breadcrumb"></nav>
        </div>
    </div>

    <main class="main">
        <div class="container">
            <div class="tool-layout">
                <div class="tool-content">
                    <div class="tool-header">
                        <div class="tool-icon">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <polyline points="12 6 12 12 16 14"/>
                            </svg>
                        </div>
                        <div class="tool-info">
                            <h1>World Clock</h1>
                            <p class="tool-description">Track multiple timezones with live updates and 12/24‚Äëhour display.</p>
                        </div>
                    </div>

                    <div class="card mb-6">
                        <div class="card-header">
                            <div class="card-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 20h9"/>
                                    <path d="M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
                                </svg>
                            </div>
                            <div>
                                <h3 class="card-title">Add Timezone</h3>
                                <p class="card-description">Pick a location or enter an IANA timezone (e.g., Europe/Paris)</p>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="tzSelect">Popular timezones</label>
                                <select id="tzSelect" class="form-select">
                                    <option value="">Select‚Ä¶</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="tzInput">Custom IANA</label>
                                <input id="tzInput" type="text" class="form-input" placeholder="e.g., Asia/Kolkata">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Display</label>
                                <label class="checkbox-item">
                                    <input type="checkbox" id="is24h" checked>
                                    <span class="checkmark"></span>
                                    <span>24‚Äëhour</span>
                                </label>
                            </div>
                        </div>

                        <div class="btn-group">
                            <button class="btn btn-primary" onclick="addSelected()">Add</button>
                            <button class="btn btn-outline" onclick="addLocal()">Use My Timezone</button>
                            <button class="btn btn-ghost" onclick="clearAll()">Clear All</button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="3"/>
                                </svg>
                            </div>
                            <div>
                                <h3 class="card-title">Clocks</h3>
                                <p class="card-description">Live time across locations</p>
                            </div>
                        </div>
                        <div id="clockGrid" class="grid" style="grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 1rem;"></div>
                    </div>
                </div>

                <div class="tool-sidebar">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                                </svg>
                            </div>
                            <div>
                                <h3 class="card-title">Tips</h3>
                            </div>
                        </div>
                        <ul class="text-xs text-secondary" style="list-style: disc; padding-left: 18px;">
                            <li>Edit the label by clicking the city name</li>
                            <li>Use 24‚Äëhour toggle for all clocks</li>
                            <li>Your clocks are saved automatically</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>DevTools Hub</h4>
                    <p>Professional developer tools that work offline. Privacy-focused and completely free.</p>
                </div>
                <div class="footer-section">
                    <h4>Time & Date</h4>
                    <a href="world-clock.html">World Clock</a>
                    <a href="unix-timestamp-converter.html">Unix Timestamp</a>
                    <a href="date-calculator.html">Date Calculator</a>
                </div>
                <div class="footer-section">
                    <h4>Popular</h4>
                    <a href="../tools/json-formatter.html">JSON Formatter</a>
                    <a href="../tools/qr-generator.html">QR Generator</a>
                    <a href="../tools/password-generator.html">Password Generator</a>
                </div>
                <div class="footer-section">
                    <h4>Features</h4>
                    <span>‚úì Works Offline</span>
                    <span>‚úì No Data Collection</span>
                    <span>‚úì Mobile Friendly</span>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 DevTools Hub. Built with ‚ù§Ô∏è for developers.</p>
            </div>
        </div>
    </footer>

    <script src="../assets/js/modern-shared.js"></script>
    <script>
        const STORAGE_KEY = 'devtools_hub_world_clocks_v1';
        const popular = [
            'UTC','Europe/London','Europe/Paris','Europe/Berlin','Europe/Moscow',
            'Africa/Cairo','Asia/Jerusalem','Asia/Dubai','Asia/Kolkata','Asia/Dhaka','Asia/Bangkok','Asia/Singapore','Asia/Hong_Kong','Asia/Tokyo','Asia/Seoul','Australia/Sydney',
            'America/Sao_Paulo','America/New_York','America/Chicago','America/Denver','America/Los_Angeles','America/Vancouver'
        ];
        let clocks = loadClocks();
        let timerId = null;

        function loadClocks(){
            try { const raw = localStorage.getItem(STORAGE_KEY); return raw ? JSON.parse(raw) : []; } catch { return []; }
        }
        function saveClocks(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(clocks)); }

        function fillPopular(){
            const sel = document.getElementById('tzSelect');
            popular.forEach(tz => {
                const o = document.createElement('option'); o.value = tz; o.textContent = tz; sel.appendChild(o);
            });
        }

        function addSelected(){
            const sel = document.getElementById('tzSelect').value;
            const input = document.getElementById('tzInput').value.trim();
            const tz = input || sel;
            if (!tz) { if (window.ToastManager) window.ToastManager.info('Select or enter a timezone'); return; }
            try {
                // Validate by formatting once
                new Intl.DateTimeFormat('en-US', { timeZone: tz }).format(new Date());
            } catch { if (window.ToastManager) window.ToastManager.error('Invalid timezone'); return; }
            clocks.push({ id: Date.now(), tz, label: tz });
            saveClocks();
            render();
        }

        function addLocal(){
            const tz = Intl.DateTimeFormat().resolvedOptions().timeZone;
            clocks.push({ id: Date.now(), tz, label: tz });
            saveClocks(); render();
        }

        function clearAll(){ clocks = []; saveClocks(); render(); }

        function removeClock(id){ clocks = clocks.filter(c => c.id !== id); saveClocks(); render(); }

        function renameClock(id, el){
            const c = clocks.find(x => x.id === id); if (!c) return;
            c.label = el.textContent.trim() || c.tz; saveClocks();
        }

        function render(){
            const grid = document.getElementById('clockGrid'); grid.innerHTML='';
            const is24 = document.getElementById('is24h').checked;
            clocks.forEach(c => {
                const card = document.createElement('div'); card.className='card';
                card.innerHTML = `
                    <div style="display:flex;align-items:flex-start;justify-content:space-between;gap:.5rem;">
                        <div>
                            <div contenteditable="true" class="font-semibold" style="outline:none;">${escapeHtml(c.label)}</div>
                            <div class="text-xs text-secondary">${escapeHtml(c.tz)}</div>
                        </div>
                        <button class="btn btn-outline btn-sm" aria-label="Remove">Remove</button>
                    </div>
                    <div class="font-mono" style="font-size:1.75rem;margin-top:.5rem;" data-time></div>
                    <div class="text-secondary" style="margin-top:.25rem;" data-date></div>
                `;
                card.querySelector('button').addEventListener('click', () => removeClock(c.id));
                const labelEl = card.querySelector('.font-semibold');
                labelEl.addEventListener('blur', () => renameClock(c.id, labelEl));
                labelEl.addEventListener('keydown', e => { if (e.key==='Enter'){ e.preventDefault(); labelEl.blur(); } });
                grid.appendChild(card);
                c._timeEl = card.querySelector('[data-time]');
                c._dateEl = card.querySelector('[data-date]');
                c._is24 = is24;
            });
            startTicker();
        }

        function startTicker(){
            if (timerId) clearInterval(timerId);
            tick();
            timerId = setInterval(tick, 1000);
        }

        function tick(){
            const is24 = document.getElementById('is24h').checked;
            clocks.forEach(c => {
                const now = new Date();
                const timeFmt = new Intl.DateTimeFormat('en-US', { hour: 'numeric', minute: '2-digit', second: '2-digit', hour12: !is24, timeZone: c.tz });
                const dateFmt = new Intl.DateTimeFormat('en-US', { year: 'numeric', month: 'short', day: '2-digit', weekday: 'short', timeZone: c.tz });
                if (c._timeEl) c._timeEl.textContent = timeFmt.format(now);
                if (c._dateEl) c._dateEl.textContent = dateFmt.format(now) + ' (UTC' + offsetString(c.tz) + ')';
            });
        }

        function offsetString(tz){
            const now = new Date();
            const locale = 'en-US';
            const fmt = new Intl.DateTimeFormat(locale, { timeZone: tz, timeZoneName: 'shortOffset' });
            const parts = fmt.formatToParts(now);
            const tzn = parts.find(p => p.type==='timeZoneName');
            return tzn ? tzn.value.replace('UTC', '') : '';
        }

        function escapeHtml(s){ const d=document.createElement('div'); d.textContent=s; return d.innerHTML; }

        document.addEventListener('DOMContentLoaded', () => {
            fillPopular();
            render();
            document.getElementById('is24h').addEventListener('change', startTicker);
        });
    </script>
</body>
</html>

